# Infix Calculator

Приложение для вычисления математических выражений в инфиксной нотации с поддержкой функций, констант и переменных.

## Описание проекта

Данное приложение представляет собой калькулятор, который:
- Читает математические выражения из файла `input.txt`
- Поддерживает определение переменных через `DEFINE:`
- Выполняет вычисления через `EXECUTE:`
- Преобразует инфиксную нотацию в обратную польскую нотацию (RPN)
- Вычисляет результат используя алгоритм стека

## Структура файлов

### Основные файлы

#### `main.py`
Главный файл приложения, который координирует работу всех модулей.

**Функции:**
- **Основная логика**: Читает файл `input.txt`, обрабатывает команды `DEFINE:` и `EXECUTE:`
- **Обработка переменных**: Парсит определения переменных в формате `DEFINE: ИМЯ=ЗНАЧЕНИЕ`
- **Обработка выражений**: Парсит и выполняет математические выражения в формате `EXECUTE: ВЫРАЖЕНИЕ`
- **Подстановка констант**: Заменяет `M_PI` на 3.14 и `M_E` на 2.72

#### `alg_polsk_zap.py`
Модуль для преобразования инфиксной нотации в обратную польскую нотацию (RPN).

**Функции:**
- **`is_float(element: any) -> bool`**
  - **Описание**: Проверяет, является ли элемент числом с плавающей точкой
  - **Входные данные**: `element` - строка для проверки
  - **Возвращаемое значение**: `True` если элемент является числом с плавающей точкой, иначе `False`
  - **Пример**: `is_float("3.14")` → `True`

- **`infix_to_rpn(expression)`**
  - **Описание**: Преобразует математическое выражение из инфиксной нотации в обратную польскую нотацию
  - **Входные данные**: `expression` - список токенов в инфиксной нотации
  - **Возвращаемое значение**: Список токенов в обратной польской нотации
  - **Поддерживаемые операции**: `+`, `-`, `*`, `/`, `%`, `^`, `sin`, `cos`, `tan`, `sqrt`, `log`, `exp`, `abs`
  - **Пример**: `infix_to_rpn(['3', '+', '4', '*', '2'])` → `['3', '4', '2', '*', '+']`

#### `alg_counting.py`
Модуль для вычисления результата выражения в обратной польской нотации.

**Функции:**
- **`sum(a, b)`**
  - **Описание**: Сложение двух чисел
  - **Входные данные**: `a`, `b` - числа для сложения
  - **Возвращаемое значение**: Сумма `a + b`

- **`subtraction(a, b)`**
  - **Описание**: Вычитание двух чисел
  - **Входные данные**: `a`, `b` - числа для вычитания
  - **Возвращаемое значение**: Разность `a - b`

- **`multiply(a, b)`**
  - **Описание**: Умножение двух чисел
  - **Входные данные**: `a`, `b` - числа для умножения
  - **Возвращаемое значение**: Произведение `a * b`

- **`division(a, b)`**
  - **Описание**: Деление двух чисел
  - **Входные данные**: `a`, `b` - числа для деления
  - **Возвращаемое значение**: Частное `a / b`

- **`remains(a, b)`**
  - **Описание**: Остаток от деления
  - **Входные данные**: `a`, `b` - числа для операции
  - **Возвращаемое значение**: Остаток `a % b`

- **`powra(a, b)`**
  - **Описание**: Возведение в степень
  - **Входные данные**: `a` - основание, `b` - показатель степени
  - **Возвращаемое значение**: `a ^ b`

- **`sinus(x)`**
  - **Описание**: Синус угла в радианах
  - **Входные данные**: `x` - угол в радианах
  - **Возвращаемое значение**: `sin(x)`

- **`cosin(x)`**
  - **Описание**: Косинус угла в радианах
  - **Входные данные**: `x` - угол в радианах
  - **Возвращаемое значение**: `cos(x)`

- **`tang(x)`**
  - **Описание**: Тангенс угла в радианах
  - **Входные данные**: `x` - угол в радианах
  - **Возвращаемое значение**: `tan(x)`

- **`sqrtu(x)`**
  - **Описание**: Квадратный корень числа
  - **Входные данные**: `x` - число
  - **Возвращаемое значение**: `√x`

- **`expon(x)`**
  - **Описание**: Экспонента числа
  - **Входные данные**: `x` - число
  - **Возвращаемое значение**: `e^x`

- **`abss(x)`**
  - **Описание**: Модуль числа
  - **Входные данные**: `x` - число
  - **Возвращаемое значение**: `|x|`

- **`logarifm(base, arg)`**
  - **Описание**: Логарифм по основанию
  - **Входные данные**: `base` - основание логарифма, `arg` - аргумент
  - **Возвращаемое значение**: `log_base(arg)`

- **`alg_count(rpn_expression)`**
  - **Описание**: Вычисляет результат выражения в обратной польской нотации
  - **Входные данные**: `rpn_expression` - список токенов в RPN
  - **Возвращаемое значение**: Результат вычисления
  - **Алгоритм**: Использует стек для вычисления результата

#### `polz.py`
Модуль для парсинга математических выражений и проверки корректности.

**Функции:**
- **`isConstant(token)`**
  - **Описание**: Проверяет, является ли токен константой
  - **Входные данные**: `token` - строка для проверки
  - **Возвращаемое значение**: `True` если токен является константой (`M_PI`, `M_E`), иначе `False`

- **`check_brackets_balance(line)`**
  - **Описание**: Проверяет правильность расстановки скобок в выражении
  - **Входные данные**: `line` - строка с выражением
  - **Возвращаемое значение**: `True` если скобки расставлены правильно, иначе `False`
  - **Пример**: `check_brackets_balance("(2+3)")` → `True`

- **`isFunction(token)`**
  - **Описание**: Проверяет, является ли токен математической функцией
  - **Входные данные**: `token` - строка для проверки
  - **Возвращаемое значение**: `True` если токен является функцией, иначе `False`

- **`getTokenType(char)`**
  - **Описание**: Определяет тип символа в выражении
  - **Входные данные**: `char` - символ для анализа
  - **Возвращаемое значение**: Тип токена: `'digit'`, `'word'`, `'bracket'`, `'space'`, `'operation'`

- **`parse_math_expression(expression)`**
  - **Описание**: Разбирает математическое выражение на токены
  - **Входные данные**: `expression` - строка с математическим выражением
  - **Возвращаемое значение**: Список токенов
  - **Пример**: `parse_math_expression("3+4*2")` → `['3', '+', '4', '*', '2']`

#### `priory.py`
Модуль для работы с приоритетами операций.

**Функции:**
- **`sort_by_priority(expression1)`**
  - **Описание**: Сортирует символы в выражении по приоритету операций
  - **Входные данные**: `expression1` - строка с выражением
  - **Возвращаемое значение**: Строка с символами, отсортированными по приоритету
  - **Приоритеты**: `(` = 0, `)` = 1, `^` = 2, `*`/`/` = 3, `+`/`-` = 4

#### `print.py`
Модуль для вывода данных.

**Функции:**
- **`print_array(array)`**
  - **Описание**: Выводит элементы массива на экран
  - **Входные данные**: `array` - массив для вывода
  - **Возвращаемое значение**: Нет (выводит в консоль)

### Вспомогательные файлы

#### `get_string_type.py`
Пустой файл (не используется в приложении).

#### `obraz.py`
Пустой файл (не используется в приложении).

#### `input.txt`
Файл с входными данными в формате:
```
DEFINE: ИМЯ_ПЕРЕМЕННОЙ=ЗНАЧЕНИЕ
EXECUTE: МАТЕМАТИЧЕСКОЕ_ВЫРАЖЕНИЕ
```

#### `output.txt`
Файл для вывода результатов (в текущей версии не используется).

## Пример использования

**Входной файл `input.txt`:**
```
DEFINE: A=3
DEFINE: B=1
EXECUTE: sin(3*M_PI/2)
```

**Результат выполнения:**
```
Start to handle DEFINE
Parsed next define:  {A : 3}
Start to handle DEFINE
Parsed next define:  {B : 1}
This string is EXECUTE
-1.0
```

## Алгоритм работы

1. **Чтение входного файла**: Приложение читает файл `input.txt`
2. **Обработка определений**: Парсит команды `DEFINE:` и сохраняет переменные
3. **Обработка выражений**: Для команд `EXECUTE:`:
   - Проверяет баланс скобок
   - Заменяет константы (`M_PI` → 3.14, `M_E` → 2.72)
   - Парсит выражение на токены
   - Преобразует в обратную польскую нотацию
   - Вычисляет результат
   - Выводит результат

## Поддерживаемые операции

- **Арифметические**: `+`, `-`, `*`, `/`, `%`, `^`
- **Тригонометрические**: `sin`, `cos`, `tan`
- **Другие функции**: `sqrt`, `log`, `exp`, `abs`
- **Константы**: `M_PI` (π), `M_E` (e)
- **Скобки**: `(`, `)`